<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/index.css">
</head>
<style>
    .clearfix:after {
        display: block;
        clear: both;
        content: "";
        visibility: hidden;
        height: 0
    }

    .payOrderItem {
        display: inline-block;
        height: 40px;
        line-height: 40px;
        padding: 0 10px;
        border-radius: 5px;
        border: 1px solid #ccc;
        margin: 5px 5px;
    }

    .el-checkbox+.el-checkbox {
        margin-left: 0px;
    }

    .fl {
        float: left;
    }

    .color1 {
        background: #fef0f0;
        cursor: not-allowed;
    }

    .color1:hover {
        background: #fef0f0;
    }

    .progress {
        margin-top: 2px;
        width: 100%;
        height: 14px;
        margin-bottom: 10px;
        overflow: hidden;
        background-color: #f5f5f5;
        border-radius: 4px;
        -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, .1);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, .1);
    }

    .progress-bar {
        background-color: rgb(92, 184, 92);
        background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.14902) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.14902) 50%, rgba(255, 255, 255, 0.14902) 75%, transparent 75%, transparent);
        background-size: 40px 40px;
        box-shadow: rgba(0, 0, 0, 0.14902) 0px -1px 0px 0px inset;
        box-sizing: border-box;
        color: rgb(255, 255, 255);
        display: block;
        float: left;
        font-size: 12px;
        height: 20px;
        line-height: 20px;
        text-align: center;
        transition-delay: 0s;
        transition-duration: 0.6s;
        transition-property: width;
        transition-timing-function: ease;
        width: 100%;
    }
    .maskLoading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 9999999;
            /* display: none; */
        }

        .maskLoading .imgText {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            width: 400px;
            height: 180px;
        }

        .maskLoading .imgText p {
            color: #fff;
            text-align: center;
        }
        [v-cloak] {
            display: none;
        }
</style>

<body>
    <div id="app">
        <transition name="el-fade-in-linear">
            <div class="maskLoading" v-cloak v-show='updataFiles'>
                <div class="imgText">
                    <img style="margin-left: 40%;" src="images/loading.gif" alt="">
                    <p>文件较大或上行网速较慢，请耐心等待上传。<br />过程中请不要关闭或刷新浏览器！避免上传失败。<br />上传成功后页面自动刷新</p>
                </div>
            </div>
        </transition>
        <div v-show="showList">
            <el-input v-model="tableDataName" placeholder="请输入" style="width:240px"></el-input>
            <el-button type="primary" @click="search">搜索</el-button>
            <el-button type="primary" @click="href">创建订单</el-button>
            <el-button type="primary" @click="creat1">创建追付账单</el-button>
            <el-table :data="tableDataEnd" ref="multipleTable" :cell-class-name="rowClass" border
                      style="width: 100%;margin-top:5px;" @selection-change="handleSelectionChange">
                <el-table-column type="selection" width="35">
                </el-table-column>
                <el-table-column width="280" label="订单号">
                    <template slot-scope="scope">
                        <span v-if='scope.row.type ==64'>
                            <img style="width:15px" src="images/bigC.png">
                        </span>
                        <span v-if='scope.row.studCourse.parentId !==null&&scope.row.type !==64'>
                            <img style="width:15px" src="images/ss.svg">
                        </span>
                        <span style="color:#409EFF;cursor: pointer;"
                              @click="sees(scope.row,scope.$index)">{{ scope.row.studCourse.orderNo }}</span>
                    </template>
                </el-table-column>
                <el-table-column :show-overflow-tooltip="true" label="订单备注">
                    <template slot-scope="scope">
                        <span>{{ scope.row.remark }}</span>
                    </template>
                </el-table-column>
                <el-table-column :show-overflow-tooltip="true" label="Official Deadline">
                    <template slot-scope="scope">
                        <span>{{ scope.row.examTime }}</span>
                    </template>
                </el-table-column>
                <el-table-column :show-overflow-tooltip="true" label="订单状态" width="260">
                    <template slot-scope="scope">
                        <el-tag v-if='scope.row.studCourse.statused ===1'>未处理（无任何销售接单）</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===2'>待审核</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===4'>待确定</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===8'>待规划（等待教师/运营接单）</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===16'>规划中(订单第一次超时等待运营接单)</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===32'>规划中(订单第二次超时等待运营主管强制指派)</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===64'>规划中(运营接单待指派，正在处理)</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===128'>待排课</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===256'>已排课</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===512'>待结课</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===1024'>已结课</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===2048'>已强制结课</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===4096'>已取消</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===8192'>坏单申请中</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===16384'>坏单已确认结束</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===32768'>销售被更换 </el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===65536'>事故单申请中</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===131072'>事故单已处理</el-tag>
                        <el-tag v-if='scope.row.studCourse.statused ===262144'>事故单更换教师</el-tag>
                    </template>
                </el-table-column>
                <el-table-column label="确认函状态" width="120" :show-overflow-tooltip="true">
                    <template slot-scope="scope">
                        <el-tag v-if='scope.row.studCourse.studPurchaseOrder.statused===null'>未填写</el-tag>
                        <el-tag type="success" v-if='scope.row.studCourse.studPurchaseOrder.statused===0'>未发送</el-tag>
                        <el-tag type="info" v-if='scope.row.studCourse.studPurchaseOrder.statused===1'>已发送未确认</el-tag>
                        <el-tag type="warning" v-if='scope.row.studCourse.studPurchaseOrder.statused===2'>支付成功</el-tag>
                        <el-tag type="danger" v-if='scope.row.studCourse.studPurchaseOrder.statused===3'>过期失效</el-tag>
                        <el-tag v-if='scope.row.studCourse.studPurchaseOrder.statused===4'>已结课</el-tag>
                    </template>
                </el-table-column>
                <el-table-column label="接单时间" :show-overflow-tooltip="true">
                    <template slot-scope="scope">
                        <span>{{ scope.row.createAt }}</span>
                    </template>
                </el-table-column>
                <el-table-column label="订单来源" :show-overflow-tooltip="true">
                    <template slot-scope="scope">
                        <span>{{ scope.row.deptName }}</span>
                    </template>
                </el-table-column>
                <el-table-column label="操作确认函" width="110">
                    <template slot-scope="scope">
                        <el-dropdown trigger="click">
                            <span class="el-dropdown-link" style="cursor: pointer;color: #409EFF;">
                                下拉操作
                                <i class="el-icon-arrow-down el-icon--right"></i>
                            </span>
                            <el-dropdown-menu slot="dropdown">
                                <el-dropdown-item @click.native="changetext(scope.row,scope.$index)"
                                                  v-if="(scope.row.statused>=4||scope.row.purchaseStatused!==null)&&hasPermission('sys:seller:myOrder:xiugai')">
                                    修改订单信息</el-dropdown-item>
                                <el-dropdown-item disabled
                                                  v-if="(scope.row.statused<4&&scope.row.purchaseStatused===null)&&hasPermission('sys:seller:myOrder:xiugai')">
                                    修改订单信息</el-dropdown-item>
                                <!-- <el-dropdown-item @click.native="seetext(scope.row,scope.$index)" v-if="scope.row.statused<4&&scope.row.purchaseStatused===null">填写</el-dropdown-item>
                <el-dropdown-item disabled v-if="scope.row.purchaseStatused===0||scope.row.purchaseStatused===1||scope.row.purchaseStatused===2||scope.row.purchaseStatused===3||scope.row.purchaseStatused===4||scope.row.statused>4">填写</el-dropdown-item> -->
                                <el-dropdown-item @click.native="imchat(scope.row,scope.$index)"
                                                  v-if="scope.row.studCourse.groupNo!==''&&hasPermission('sys:seller:myOrder:liaotianjilu')">
                                    聊天记录</el-dropdown-item>
                                <el-dropdown-item disabled
                                                  v-if="scope.row.studCourse.groupNo===''&&hasPermission('sys:seller:myOrder:liaotianjilu')">
                                    聊天记录</el-dropdown-item>
                                <!-- <el-dropdown-item @click.native="apply(scope.row,scope.$index)"
                                                  v-if="scope.row.studCourse.statused<=4&&hasPermission('sys:seller:myOrder:huaidanshenqing')">
                                    坏单申请</el-dropdown-item>
                                <el-dropdown-item disabled
                                                  v-if="scope.row.studCourse.statused>4&&hasPermission('sys:seller:myOrder:huaidanshenqing')">
                                    坏单申请</el-dropdown-item> -->
                                <el-dropdown-item :disabled="scope.row.studCourse.statused > 64"
                                                  @click.native="apply(scope.row,scope.$index)">
                                    坏单申请</el-dropdown-item>
                                <!-- <el-dropdown-item @click.native="apply_Accident(scope.row,scope.$index)"
                                    v-if="(scope.row.studCourse.statused>4&&scope.row.studCourse.statused !=65536)&&hasPermission('sys:seller:myOrder:shenqingshigudan')">
                                    申请售后单</el-dropdown-item>
                                <el-dropdown-item disabled
                                    v-if="(scope.row.studCourse.statused<=4||scope.row.studCourse.statused===65536)&&hasPermission('sys:seller:myOrder:shenqingshigudan')">
                                    申请售后单</el-dropdown-item> -->
                                <el-dropdown-item @click.native="apply_Accident(scope.row,scope.$index)"
                                                  :disabled="scope.row.studCourse.statused < 128">
                                    申请售后单</el-dropdown-item>
                                <el-dropdown-item @click.native="unlock_order(scope.row,scope.$index)"
                                                  v-if="scope.row.studCourse.deleteFlag===true&&scope.row.type!==64">
                                    解锁订单
                                </el-dropdown-item>
                                <el-dropdown-item @click.native="lock_order(scope.row,scope.$index)"
                                                  v-if="scope.row.studCourse.statused>4&&scope.row.studCourse.statused<128&&scope.row.studCourse.deleteFlag===false&&scope.row.type!==64">
                                    锁定订单</el-dropdown-item>
                                <el-dropdown-item @click.native="sees(scope.row,scope.$index)">查看详情</el-dropdown-item>
                            </el-dropdown-menu>
                        </el-dropdown>
                    </template>
                </el-table-column>
            </el-table>
            <el-dialog :visible.sync="badmodel" width="40%">
                <el-form :model="ruleForm" :rules="rules" ref="ruleForm" label-width="80px" class="demo-ruleForm">
                    <el-form-item label="反馈类型" prop="extype">
                        <el-select v-model="ruleForm.extype" placeholder="选择反馈类型">
                            <el-option label="价格不符" value="1"></el-option>
                            <el-option label="师资资源" value="2"></el-option>
                            <el-option label="客户意向不足" value="3"></el-option>
                            <el-option label="其他" value="4"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="理由" prop="description">
                        <el-input v-model="ruleForm.description"></el-input>
                    </el-form-item>
                </el-form>
                <span slot="footer" class="dialog-footer">
                    <el-button type="primary" v-bind:loading="btnstatus" @click="submitForm('ruleForm')">{{btnval2}}
                    </el-button>
                </span>
            </el-dialog>
            <el-dialog :visible.sync="shigumodel" width="40%" :before-close='shigumodelClose' v-loading='shigumodelLoading'>
                <el-form :model="ruleForm" :rules="rules" ref="ruleForm" label-width="80px" class="demo-ruleForm">
                    <el-form-item label="事故类别" prop='shigutype'>
                        <el-select v-model="ruleForm.shigutype" placeholder="请选择事故类别">
                            <el-option key="1"
                                       label="金额问题"
                                       value="1">
                            </el-option>
                            <el-option key="4"
                                       label="售后问题"
                                       value="4">
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="申请理由" prop="descriptions">
                        <el-input v-model="ruleForm.descriptions" type='textarea'></el-input>
                    </el-form-item>
                    <el-form-item label="上传文件">
                        <el-button type="primary" id='selectfiles'>选择文件</el-button>
                        <div style="padding: 10px 0;" id="ossfile"></div>
                        <!-- <el-button type='primary'>上传文件</el-button> -->
                    </el-form-item>
                </el-form>
                <span slot="footer" class="dialog-footer">
                    <el-button type="primary" v-bind:loading="shigumodelLoading" @click="shigumodelSubmit">确 定
                    </el-button>
                </span>
            </el-dialog>


            <el-dialog :visible.sync="creatmodel1" width="40%">
                <el-form :model="ruleForm" :rules="rules" ref="ruleForm" label-width="100px" class="demo-ruleForm">
                    <el-form-item label="金额" prop="payMoney">
                        <el-input style="width:70%" v-model="ruleForm.payMoney"
                                  onkeyup="this.value=this.value.replace(/[^\d.]/g,'').replace(/^(\-)*(\d+)\.(\d\d).*$/,'$1$2.$3')">
                        </el-input>
                        <span>{{currencycreat}}</span>
                    </el-form-item>
                </el-form>
                <span slot="footer" class="dialog-footer">
                    <el-button type="primary" v-bind:loading="creatst1" @click="creatsave('ruleForm')">{{creatbtn1}}
                    </el-button>
                </span>
            </el-dialog>
            <el-pagination style="margin-top:15px" @size-change="handleSizeChange" @current-change="handleCurrentChange"
                           :current-page="currentPage" :page-sizes="[15,20]" :page-size="limit"
                           layout="total, sizes, prev, pager, next, jumper" :total="total">
            </el-pagination>
        </div>


        <div v-show="!showList">
            <template>
                <el-tabs v-model="activeName" @tab-click="handleClick">
                    <el-tab-pane label="学生信息" name="first"></el-tab-pane>
                    <el-tab-pane label="订单信息" name="second"></el-tab-pane>
                </el-tabs>
            </template>
            <el-form :model="ruleForm" :rules="rules" ref="ruleForm" label-width="180px" style="width:980px;"
                     class="demo-ruleForm">
                <div v-show="!showa">
                    <el-form-item label="学生姓名" prop="nickName">
                        <el-input v-model="ruleForm.nickName" disabled placeholder="请输入学生姓名"></el-input>
                    </el-form-item>
                    <el-form-item label="微信号" prop="wxAccount">
                        <el-input v-model="ruleForm.wxAccount" disabled placeholder="请输入微信号"></el-input>
                    </el-form-item>
                    <el-form-item label="留学国家" prop="countryId">
                        <el-select v-model="ruleForm.countryId" filterable placeholder="请选择留学国家"
                                   v-bind:disabled="disabledInput" @change="change_state">
                            <el-option v-for="item in countrys" :key="item.id" :label="item.name" :value="item.id">
                            </el-option>
                        </el-select>
                        <el-button type="primary" @click="display">修改</el-button>
                    </el-form-item>
                    <el-form-item label="学校" prop="universityId">
                        <el-select v-model="ruleForm.universityId" disabled filterable placeholder="请选择学校" @change="change1">
                            <el-option v-for="item in universitys" :key="item.id" :label="item.name" :value="item.id">
                            </el-option>
                        </el-select>
                        <el-input v-model="ruleForm.school1" disabled v-show="see" style="width:200px;" :disabled="true">
                        </el-input>
                    </el-form-item>
                    <el-form-item label="专业" prop="professionalId">
                        <el-select v-model="ruleForm.professionalId" disabled filterable placeholder="请选择专业" @change="change2">
                            <el-option v-for="item in professionalNames" :key="item.id" :label="item.chineseName"
                                       :value="item.id">
                            </el-option>
                        </el-select>
                        <el-input v-model="ruleForm.zy1" disabled v-show="see" style="width:200px;" :disabled="true"></el-input>
                    </el-form-item>
                    <el-form-item label="学年" prop="schoolYear">
                        <el-select v-model="ruleForm.schoolYear" filterable placeholder="请选择学年" disabled>
                            <el-option label="1年" value="1"></el-option>
                            <el-option label="2年" value="2"></el-option>
                            <el-option label="3年" value="3"></el-option>
                            <el-option label="4年" value="4"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="在读学历" prop="levelId" disabled>
                        <el-select v-model="ruleForm.levelId" placeholder="请选择在读学历">
                            <el-option v-for="item in levels" :key="item.id" :label="item.name" :value="item.id">
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="学校教务系统账号" disabled prop="schoolAccount">
                        <el-input v-model="ruleForm.schoolAccount"></el-input>
                    </el-form-item>
                    <el-form-item label="学校教务系统密码" disabled prop="schoolPws">
                        <el-input v-model="ruleForm.schoolPws"></el-input>
                    </el-form-item>
                    <el-form-item label="周一" prop="one" class="clearfix">
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime1" style="width:120px"
                                            :picker-options="{
                        start: '08:00',
                        step: '00:15',
                        end: '12:00'
                      }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime1" style="width:120px"
                                            :picker-options="{
                        start: '08:00',
                        step: '00:15',
                        end: '12:00',
                        minTime: ruleForm.startTime1
                      }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime2" style="width:120px"
                                            :picker-options="{
                          start: '12:00',
                          step: '00:15',
                          end: '18:00'
                        }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime2" style="width:120px"
                                            :picker-options="{
                          start: '12:00',
                          step: '00:15',
                          end: '18:00',
                          minTime: ruleForm.startTime2
                        }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime3" style="width:120px"
                                            :picker-options="{
                            start: '18:00',
                            step: '00:15',
                            end: '24:00'
                          }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime3" style="width:120px"
                                            :picker-options="{
                            start: '18:00',
                            step: '00:15',
                            end: '24:00',
                            minTime: ruleForm.startTime3
                          }">
                            </el-time-select>
                        </div>
                    </el-form-item>
                    <el-form-item label="周二" prop="two" class="clearfix">
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime4" style="width:120px"
                                            :picker-options="{
                          start: '08:00',
                          step: '00:15',
                          end: '12:00'
                        }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime4" style="width:120px"
                                            :picker-options="{
                          start: '08:00',
                          step: '00:15',
                          end: '12:00',
                          minTime: ruleForm.startTime4
                        }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime5" style="width:120px"
                                            :picker-options="{
                            start: '12:00',
                            step: '00:15',
                            end: '18:00'
                          }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime5" style="width:120px"
                                            :picker-options="{
                            start: '12:00',
                            step: '00:15',
                            end: '18:00',
                            minTime: ruleForm.startTime5
                          }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime6" style="width:120px"
                                            :picker-options="{
                              start: '18:00',
                              step: '00:15',
                              end: '24:00'
                            }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime6" style="width:120px"
                                            :picker-options="{
                              start: '18:00',
                              step: '00:15',
                              end: '24:00',
                              minTime: ruleForm.startTime6
                            }">
                            </el-time-select>
                        </div>
                    </el-form-item>
                    <el-form-item label="周三" prop="three" class="clearfix">
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime7" style="width:120px"
                                            :picker-options="{
                            start: '08:00',
                            step: '00:15',
                            end: '12:00'
                          }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime7" style="width:120px"
                                            :picker-options="{
                            start: '08:00',
                            step: '00:15',
                            end: '12:00',
                            minTime: ruleForm.startTime7
                          }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime8" style="width:120px"
                                            :picker-options="{
                              start: '12:00',
                              step: '00:15',
                              end: '18:00'
                            }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime8" style="width:120px"
                                            :picker-options="{
                              start: '12:00',
                              step: '00:15',
                              end: '18:00',
                              minTime: ruleForm.startTime8
                            }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime9" style="width:120px"
                                            :picker-options="{
                                start: '18:00',
                                step: '00:15',
                                end: '24:00'
                              }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime9" style="width:120px"
                                            :picker-options="{
                                start: '18:00',
                                step: '00:15',
                                end: '24:00',
                                minTime: ruleForm.startTime9
                              }">
                            </el-time-select>
                        </div>
                    </el-form-item>
                    <el-form-item label="周四" prop="four" class="clearfix">
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime10" style="width:120px"
                                            :picker-options="{
                              start: '08:00',
                              step: '00:15',
                              end: '12:00'
                            }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime10" style="width:120px"
                                            :picker-options="{
                              start: '08:00',
                              step: '00:15',
                              end: '12:00',
                              minTime: ruleForm.startTime10
                            }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime11" style="width:120px"
                                            :picker-options="{
                                start: '12:00',
                                step: '00:15',
                                end: '18:00'
                              }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime11" style="width:120px"
                                            :picker-options="{
                                start: '12:00',
                                step: '00:15',
                                end: '18:00',
                                minTime: ruleForm.startTime11
                              }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime12" style="width:120px"
                                            :picker-options="{
                                  start: '18:00',
                                  step: '00:15',
                                  end: '24:00'
                                }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime12" style="width:120px"
                                            :picker-options="{
                                  start: '18:00',
                                  step: '00:15',
                                  end: '24:00',
                                  minTime: ruleForm.startTime12
                                }">
                            </el-time-select>
                        </div>
                    </el-form-item>
                    <el-form-item label="周五" prop="five" class="clearfix">
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime13" style="width:120px"
                                            :picker-options="{
                                start: '08:00',
                                step: '00:15',
                                end: '12:00'
                              }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime13" style="width:120px"
                                            :picker-options="{
                                start: '08:00',
                                step: '00:15',
                                end: '12:00',
                                minTime: ruleForm.startTime13
                              }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime14" style="width:120px"
                                            :picker-options="{
                                  start: '12:00',
                                  step: '00:15',
                                  end: '18:00'
                                }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime14" style="width:120px"
                                            :picker-options="{
                                  start: '12:00',
                                  step: '00:15',
                                  end: '18:00',
                                  minTime: ruleForm.startTime14
                                }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime15" style="width:120px"
                                            :picker-options="{
                                    start: '18:00',
                                    step: '00:15',
                                    end: '24:00'
                                  }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime15" style="width:120px"
                                            :picker-options="{
                                    start: '18:00',
                                    step: '00:15',
                                    end: '24:00',
                                    minTime: ruleForm.startTime15
                                  }">
                            </el-time-select>
                        </div>
                    </el-form-item>
                    <el-form-item label="周六" prop="six" class="clearfix">
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime16" style="width:120px"
                                            :picker-options="{
                                  start: '08:00',
                                  step: '00:15',
                                  end: '12:00'
                                }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime16" style="width:120px"
                                            :picker-options="{
                                  start: '08:00',
                                  step: '00:15',
                                  end: '12:00',
                                  minTime: ruleForm.startTime16
                                }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime17" style="width:120px"
                                            :picker-options="{
                                    start: '12:00',
                                    step: '00:15',
                                    end: '18:00'
                                  }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime17" style="width:120px"
                                            :picker-options="{
                                    start: '12:00',
                                    step: '00:15',
                                    end: '18:00',
                                    minTime: ruleForm.startTime17
                                  }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime18" style="width:120px"
                                            :picker-options="{
                                      start: '18:00',
                                      step: '00:15',
                                      end: '24:00'
                                    }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime18" style="width:120px"
                                            :picker-options="{
                                      start: '18:00',
                                      step: '00:15',
                                      end: '24:00',
                                      minTime: ruleForm.startTime18
                                    }">
                            </el-time-select>
                        </div>
                    </el-form-item>
                    <el-form-item label="周日" prop="seven" class="clearfix">
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime19" style="width:120px"
                                            :picker-options="{
                                    start: '08:00',
                                    step: '00:15',
                                    end: '12:00'
                                  }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime19" style="width:120px"
                                            :picker-options="{
                                    start: '08:00',
                                    step: '00:15',
                                    end: '12:00',
                                    minTime: ruleForm.startTime19
                                  }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime20" style="width:120px"
                                            :picker-options="{
                                      start: '12:00',
                                      step: '00:15',
                                      end: '18:00'
                                    }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime20" style="width:120px"
                                            :picker-options="{
                                      start: '12:00',
                                      step: '00:15',
                                      end: '18:00',
                                      minTime: ruleForm.startTime20
                                    }">
                            </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select  disabled placeholder="起始时间" v-model="ruleForm.startTime21" style="width:120px"
                                            :picker-options="{
                                        start: '18:00',
                                        step: '00:15',
                                        end: '24:00'
                                      }">
                            </el-time-select>
                            <el-time-select  disabled placeholder="结束时间" v-model="ruleForm.endTime21" style="width:120px"
                                            :picker-options="{
                                        start: '18:00',
                                        step: '00:15',
                                        end: '24:00',
                                        minTime: ruleForm.startTime21
                                      }">
                            </el-time-select>
                        </div>
                    </el-form-item>
                    <el-button type="primary" @click="next()" style="margin-left:50%;">下一步</el-button>
                </div>
                <div v-show="!showb">
                    <el-form-item label="是否从订单扣款" prop="delivery" v-show="asas">
                        <el-switch v-model="delivery" @change="change_delivery"></el-switch>
                    </el-form-item>
                    <el-form-item label="关联订单" prop="aboutorder" v-show="ordershow">
                        <el-select v-model="ruleForm.aboutorder" placeholder="请选择关联订单">
                            <el-option v-for="item in deliverys" :key="item.id" :label="item.orderNo" :value="item.id">
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="订单类型" prop="type">
                        <el-select v-model="ruleForm.type" placeholder="请选择订单类型" @change="change_order"
                                   v-bind:disabled="disnum1">
                            <el-option label="定制辅导" value="0"></el-option>
                            <el-option label="考前突击" value="1"></el-option>
                            <el-option label="论文辅导" value="4"></el-option>
                            <el-option label="特殊订单" value="32"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="课程代码" prop="courseCode">
                        <el-input v-model="ruleForm.courseCode" v-bind:disabled="disnum"></el-input>
                    </el-form-item>
                    <el-form-item label="课程名称" prop="courseName">
                        <el-input v-model="ruleForm.courseName" v-bind:disabled="disnum"></el-input>
                    </el-form-item>
                    <el-form-item label="课程熟悉度" prop="courseFamiliarityId">
                        <el-select v-model="ruleForm.courseFamiliarityId" placeholder="请选择课程熟悉度"
                                   v-bind:disabled="disnum">
                            <el-option v-for="item in courseFamiliaritys" :key="item.id" :label="item.familiarityName"
                                       :value="item.id">
                            </el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="课程总价" prop="totalPrice">
                        <el-input v-model="ruleForm.totalPrice" v-on:input="inputFunc" @blur="changeprice()"
                                  style="width:210px;" type="number" v-bind:disabled="dis2"></el-input>
                        <el-button disabled>{{cu.currency}}</el-button>
                    </el-form-item>
                    <el-form-item label="定金" prop="minMoney">
                        <el-col :span="11">
                            <el-form-item prop="minMoney">
                                <el-input placeholder="定金" v-model="ruleForm.minMoney" type="number"
                                          v-bind:disabled="disnum"></el-input>
                            </el-form-item>
                        </el-col>
                    </el-form-item>
                    <el-form-item label="材料费" prop="decimalMaterialCost" v-show="cailiao">
                        <el-input v-model="ruleForm.decimalMaterialCost" :disabled="true" type="number"
                                  style="width:300px;"></el-input>
                        <el-button disabled>{{cu.currency}}</el-button>
                    </el-form-item>
                    <el-form-item label="课时单价" prop="price" v-show="order">
                        <el-input v-model="ruleForm.price" @blur="changeprice()" type="number" style="width:210px;"
                                  v-bind:disabled="dis1"></el-input>
                        <el-button disabled>{{cu.currency}}</el-button>
                    </el-form-item>
                    <el-form-item label="预充课时" prop="scheduledTime" v-show="order">
                        <el-input v-model="ruleForm.scheduledTime" type="number" style="width:210px;" :disabled="true">
                        </el-input>
                    </el-form-item>
                    <el-form-item label="字数" prop="wordsNum" v-show="Special"
                                  :rules="this.ruleForm.type==4?rules.wordsNum:[{ required: false, message: '请填写字数', trigger: 'blur' }]">
                        <el-input v-model="ruleForm.wordsNum" :disabled="true" type="number" style="width:300px;">
                        </el-input>
                        <span> 字</span>
                    </el-form-item>
                    <div v-show="Specialdiv">
                        <el-form-item label="特殊报价" prop="theSpecialOffer">
                            <el-checkbox :disabled="true" v-model="ruleForm.theSpecialOffer" style="width:300px;">有特殊报价
                            </el-checkbox>
                        </el-form-item>
                        <el-form-item label="报价人" prop="specialOfferUser"
                                      :rules="this.ruleForm.type==4&&this.ruleForm.theSpecialOffer==true?rules.specialOfferUser:[{ required: false, message: '请选择报价人', trigger: 'change' }]">
                            <el-select v-model="ruleForm.specialOfferUser" style="width:300px;" :disabled="true">
                                <el-option v-for="item in queryQuotableUserList" :key="item.id" :label="item.username"
                                           :value="item.userId">
                                </el-option>
                            </el-select>
                        </el-form-item>
                        <el-form-item label="实际工作量" prop="specialOffer"
                                      :rules="this.ruleForm.type==4&&this.ruleForm.theSpecialOffer==true?rules.specialOffer:[{ required: false, message: '请填写实际工作量', trigger: 'blur' }]">
                            <el-input :disabled="true" v-model="ruleForm.specialOffer" type="number"
                                      style="width:300px;"></el-input>
                            <span> 字</span>
                        </el-form-item>
                    </div>
                    <el-form-item label="赠送课时">
                        <el-col :span="11">
                            <el-form-item prop="persenterTime">
                                <el-input style="float:left;width:320px;margin-right:10px;" placeholder="赠送课时"
                                          v-model="ruleForm.persenterTime" type="number" v-bind:disabled="disnum">
                                </el-input>
                                <span>MIN</span>
                            </el-form-item>
                        </el-col>
                    </el-form-item>
                    <el-form-item label="Deal Deadline" required>
                        <el-col :span="11">
                            <el-form-item prop="endCourseTime">
                                <el-date-picker type="date" :picker-options="pickerOptions" placeholder="选择日期"
                                                v-model="ruleForm.endCourseTime"
                                                value-format="yyyy-MM-dd HH:mm:ss" style="width: 100%;">
                                </el-date-picker>
                                <!-- v-bind:disabled="disnum" -->
                            </el-form-item>
                        </el-col>
                    </el-form-item>
                    <el-form-item label="Official Deadline" prop="examTime">
                        <el-col :span="11">
                            <el-form-item prop="examTime">
                                <el-date-picker type="date" :picker-options="pickerOptions" placeholder="选择日期"
                                                v-model="ruleForm.examTime" value-format="yyyy-MM-dd HH:mm:ss"
                                                style="width: 100%;"></el-date-picker>
                                <!-- v-bind:disabled="disnum" -->
                            </el-form-item>
                        </el-col>
                    </el-form-item>
                    <el-form-item label="订单需求" prop="sellerDemandDesc">
                        <el-input type="textarea" :rows="6" v-model="ruleForm.sellerDemandDesc"></el-input>
                    </el-form-item>
                    <el-form-item label="订单备注">
                        <el-input type="textarea" :rows="4" v-model="ruleForm.remark"></el-input>
                    </el-form-item>
                    <el-form-item>
                        <el-form-item>
                            <el-button type="primary" v-bind:loading="btnstatus" v-show="show666"
                                       @click="update1('ruleForm')">{{btnval1}}</el-button>
                            <el-button type="primary" v-bind:loading="btnstatus" v-show="shows"
                                       @click="update2('ruleForm')">{{btnval1}}</el-button>
                            <el-button type="primary" v-bind:loading="btnstatus" v-show="!show1"
                                       @click="save('ruleForm')">{{btnval}}</el-button>
                            <el-button type="primary" @click="back">返回</el-button>
                        </el-form-item>
                </div>
            </el-form>

        </div>
        <!-- 多币种支付 -->
        <el-dialog :visible.sync="rightAwayPay" width="60%" v-loading="rightAwayPayLoading"
                   :before-close="rightAwayPayHandleClose" top='2vh'>
            <el-form :model="payDialogInfo" :rules="rules1" ref="payDialogInfo" label-width="100px"
                     class="demo-getCourseData">
                <el-form-item label="账单名称:" prop="studname">
                    <span v-if='payDialogInfo.type ===1'>课程预付</span>
                    <span v-if='payDialogInfo.type ===2'>欠费账单</span>
                    <span v-if='payDialogInfo.type ===4'>课程尾款</span>
                    <span v-if='payDialogInfo.type ===8'>课程追付</span>
                    <span v-if='payDialogInfo.type ===16'>补款账单</span>
                </el-form-item>
                <el-form-item label="姓名:" prop="studname">
                    <div>{{payDialogInfo.nickName}}</div>
                </el-form-item>
                <el-form-item label="账单金额:">
                    <div>{{payDialogInfo.badMoney}} {{payDialogInfo.current}}</div>
                </el-form-item>
                <el-form-item label="从订单支付:">
                    <!-- <el-checkbox></el-checkbox> -->
                    <el-switch @change='payToOrderEvent' v-model="switchValue">
                    </el-switch>
                </el-form-item>
                <div v-show='switchValue == false'>
                    <div>
                        <el-form-item label='支付方式'>
                            <el-checkbox-group v-model='chiocePaymentMethodArray'>
                                <el-checkbox style="display:block"
                                             v-for='(item, index) in paymentMethod'
                                             @change='changePaymentEvent(item)'
                                             :key='item.id'
                                             :label='item'>
                                    <span v-if='item.hasCard == true'>
                                        学期卡(剩余{{item.lastTime}}课时 = {{item.money}} {{item.current}}
                                        ({{item.exchangeMoney}}{{payDialogInfo.current}}) )
                                    </span>
                                    <span v-if='item.hasCard == false'>
                                        {{item.current}} 账户余额：{{item.money}}
                                        {{item.current}}
                                        ({{item.exchangeMoney}}
                                        {{payDialogInfo.current}})
                                    </span>
                                </el-checkbox>
                            </el-checkbox-group>
                        </el-form-item>
                    </div>
                    <div v-show='chiocePaymentMethodArray.length > 1'>
                        <el-form-item label='支付顺序'>
                            <div class="payOrderItem" v-for='(item, index) in chiocePaymentMethodArray'>
                                <span v-if='item.hasCard == true'>
                                    学期卡抵扣
                                </span>
                                <span v-if='item.hasCard == false'>
                                    {{item.current}} 账户
                                </span>
                            </div>
                        </el-form-item>
                    </div>
                    <div v-show='stillNeedPay > 0'>
                        <p style="color:red;font-size:12px;" v-show='warningPaymentMoney'>
                            支付方式账户余额不足，需转账充值
                            <span>
                                {{stillNeedPay}} {{payDialogInfo.current}}
                                <span v-show='stillNeedPaymentMoney != 0'>
                                    换汇后约 {{stillNeedPaymentMoney}} {{nomarlCurrency}}
                                </span>
                            </span>
                        </p>
                        <p style="color:#409EFF;font-size:12px;" v-show='!warningPaymentMoney'>
                            <span>
                                转账充值{{stillNeedPay}} {{payDialogInfo.current}}
                                <span>
                                    换汇后约 {{stillNeedPaymentMoney}} {{nomarlCurrency}}
                                </span>
                            </span>
                        </p>
                        <el-form-item label="转账充值金额:" prop="amount">
                            <el-input type='number' style='width:100px;' @blur='changeResiduePayMoneyEvent'
                                      v-model="residuePayMoney">
                            </el-input>
                            <el-select v-model="nomarlCurrency" placeholder="币种" style="width:100px;"
                                       @change='changeCurrency'>
                                <el-option v-for="item in currencyList" :key="item.id" :label="item.tagerCurrency"
                                           :value="item.tagerCurrency" :disabled='item.deleteFlag == true'>
                                </el-option>
                            </el-select>
                        </el-form-item>
                        <p style="color:red;font-size:12px;">请确认剩余支付金额与上传图片金额一致！</p>
                        <div>
                            <el-upload class="upload-demo" ref="upload" :headers="myHeaders2" :data="data2"
                                       :multiple="true"
                                       accept="image/png, image/jpeg" :action="url2" :on-preview="handlePreview2"
                                       :on-remove="handleRemove2" :on-success="success2" :http-request="uploadFile2"
                                       :on-error="onerror2" :file-list="fileList2" list-type="picture"
                                       :on-change="change2"
                                       :auto-upload="false">
                                <el-button slot="trigger" size="small" type="primary" style="margin-left:30px;">上传图片
                                </el-button>
                                <el-button size="small" style="display:none" type="success" @click="submitUpload">上传到服务器
                                </el-button>
                            </el-upload>
                            <p style="padding: 0 30px;">
                                <span style='margin-bottom: 10px;display: inline-block;'>备注：</span>
                                <el-input style="display:inline-block" type="textarea" placeholder="请输入备注"
                                          v-model="rightAwayPayType2Doc">
                                </el-input>
                            </p>
                        </div>
                    </div>
                </div>

                <div style="padding-left: 20px;" v-show='switchValue == true'>
                    <el-table :data="payToOrderArray" style="width: 100%">
                        <el-table-column label="订单号（剩余金额）" align='left'>
                            <template slot-scope="scope">
                                {{scope.row.orderNo}} <span
                                      style="color:#409EFF;font-weight:600;">（{{scope.row.studPurchaseOrder.leftMoney}}
                                    {{scope.row.studPurchaseOrder.currency}}）</span>
                            </template>
                        </el-table-column>
                        <el-table-column label="操作" width="120" align='center'>
                            <template slot-scope="scope">
                                <el-button size='mini' type="primary"
                                           :disabled='(scope.row.studPurchaseOrder.currency != payDialogInfo.current) || (payDialogInfo.badMoney*1 > scope.row.studPurchaseOrder.leftMoney*1)'
                                           @click="rightAwayPayType22Submit(scope.row)"
                                           v-bind:loading="b1" title>支付
                                </el-button>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>

            </el-form>
            <span slot="footer" class="dialog-footer">
                <el-button type="primary" v-show='switchValue == false' @click="rightAwayPayType2Submit"
                           v-bind:loading="b1">确定支付
                </el-button>
            </span>
        </el-dialog>
    </div>
    </div>
</body>
<script src="js/jquery.js"></script>
<script type="text/javascript">
    document.write('<script src="../../js/base.js?tmp=' + new Date().getTime() +
        '" type="text/javascript" charset="utf-8"><\/script>');
</script>
<script src="js/vue.js"></script>
<script src="js/index.js"></script>
<script src="libs/crypto.js"></script>
<script src="libs/hmac.js"></script>
<script src="libs/sha1.js"></script>
<script src="libs/base64.js"></script>
<script src="libs/plupload.full.min.js"></script>
<script src="js/axios.min.js"></script>
<script type="text/javascript">
    window.onload = function () {
        loadJsOrCss('pagejs/my_orderlist.js');
    }
</script>

</html>